<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur de Réussite Scolaire</title>
    <style>
        :root {
            --primary-color: #2563EB;    /* Bleu moderne */
            --secondary-color: #10B981;  /* Vert émeraude */
            --accent-color: #F59E0B;     /* Ambre */
            --text-color: #1F2937;       /* Gris foncé */
            --background-color: #F9FAFB;
            --card-background: #FFFFFF;
            --input-background: #F3F4F6;
            --category-1: #2563EB;       /* Bleu pour l'alimentation */
            --category-2: #10B981;       /* Vert pour le mode de vie */
            --category-3: #8B5CF6;       /* Violet pour le social */
            --category-4: #F59E0B;       /* Ambre pour l'académique */
            --category-5: #EC4899;       /* Rose pour les facteurs psychologiques */
            --category-6: #6366F1;       /* Indigo pour les facteurs environnementaux */
            --border-radius: 12px;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
            --transition-fast: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease;
            --transition-medium: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
            --transition-slow: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease;
            --focus-ring: 0 0 0 3px rgba(37, 99, 235, 0.3);
            --hover-scale: 1.02;
            --active-scale: 0.98;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            line-height: 1.5;
            color: var(--text-color);
            background: #F8F9FA;
            min-height: 100vh;
            padding: 10px;
            margin: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 10px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 878px;
            margin-left: auto;
            margin-right: auto;
        }

        .header h1 {
            color: var(--text-color);
            font-size: 1.8em;
            margin: 0;
        }

        .mode-switch {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

        .mode-buttons {
            display: flex;
            gap: 10px;
        }

        .mode-description {
            font-size: 0.9em;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
            transition: opacity 0.3s ease;
        }

        .mode-btn {
            padding: 8px 16px;
            border: 2px solid var(--primary-color);
            border-radius: 20px;
            background: transparent;
            color: var(--primary-color);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            will-change: transform;
        }

        .mode-btn.active {
            background: var(--primary-color);
            color: white;
        }

        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .disclaimer-card {
            text-align: center;
            margin: 20px auto;
            padding: 15px;
            background: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 878px;
        }

        .disclaimer {
            color: #6B7280;
            font-size: 0.95em;
            line-height: 1.5;
            max-width: 700px;
            margin: 0 auto;
            font-style: italic;
        }

        .language-switcher {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            display: flex;
            gap: 10px;
            background: var(--card-background);
            padding: 5px;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
        }

        .language-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            background: transparent;
            color: var(--text-color);
            cursor: pointer;
            transition: transform 0.3s ease, background-color 0.3s ease, color 0.3s ease;
            font-weight: 600;
            font-size: 0.9em;
            will-change: transform;
        }

        .language-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-1px);
        }

        .main-content {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            width: 100%;
            max-width: 878px;
            margin: 0 auto;
            z-index: 1;
        }

        .categories {
            display: flex;
            flex-direction: column;
            gap: 12px;
            flex: 1;
            max-width: 558px;
            min-width: 0; /* Permet au conteneur de rétrécir si nécessaire */
            z-index: 1;
        }

        .category {
            background: var(--card-background);
            padding: 10px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(0, 0, 0, 0.05);
            margin-bottom: 8px;
            width: 100%;
        }

        .category::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--category-1);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }

        .category[data-category="alimentation"]::before {
            background: var(--category-1);
        }

        .category[data-category="mode-de-vie"]::before {
            background: var(--category-2);
        }

        .category[data-category="social"]::before {
            background: var(--category-3);
        }

        .category[data-category="academique"]::before {
            background: var(--category-4);
        }

        .category[data-category="psychologique"]::before {
            background: var(--category-5);
        }

        .category[data-category="environnemental"]::before {
            background: var(--category-6);
        }

        .category-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1em;
            margin-bottom: 8px;
            padding-bottom: 6px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            font-weight: 600;
            color: var(--text-color);
        }

        .category-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1em;
        }

        .category[data-category="alimentation"] .category-icon {
            background: var(--category-1);
        }

        .category[data-category="mode-de-vie"] .category-icon {
            background: var(--category-2);
        }

        .category[data-category="social"] .category-icon {
            background: var(--category-3);
        }

        .category[data-category="academique"] .category-icon {
            background: var(--category-4);
        }

        .category[data-category="psychologique"] .category-icon {
            background: var(--category-5);
            color: white;
            border-radius: 50%;
            padding: 4px;
        }

        .category[data-category="environnemental"] .category-icon {
            background: var(--category-6);
            color: white;
            border-radius: 50%;
            padding: 4px;
        }

        .sliders-grid {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        /* Styles pour les sliders */
        .slider-group {
            background: var(--input-background);
            padding: 6px 10px;
            border-radius: 8px;
            position: relative;
            border: 1px solid rgba(0, 0, 0, 0.05);
            display: grid;
            grid-template-columns: minmax(180px, 1fr) 160px minmax(75px, auto);
            gap: 8px;
            align-items: center;
            margin-bottom: 2px;
            transition: transform 0.3s ease, opacity 0.3s ease, background-color 0.3s ease;
            will-change: transform, opacity;
            z-index: 1;
        }

        .slider-group:hover {
            background: var(--input-background);
        }

        .slider-group:focus-within {
            background: white;
            box-shadow: var(--focus-ring);
            border-color: var(--primary-color);
        }

        .slider-group.hidden {
            display: none;
        }

        .slider-group:active {
            transform: scale(var(--active-scale));
        }

        .category[data-category="alimentation"] {
            color: var(--category-1);
        }

        .category[data-category="mode-de-vie"] {
            color: var(--category-2);
        }

        .category[data-category="social"] {
            color: var(--category-3);
        }

        .category[data-category="academique"] {
            color: var(--category-4);
        }

        .slider-label {
            font-size: 0.9em;
            color: var(--text-color);
            font-weight: 600;
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 2;
        }

        .info-button {
            width: 20px;
            height: 20px;
            border: none;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 8px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            padding: 0;
        }

        .info-button::before {
            content: "?";
        }

        .info-button:hover {
            background: var(--secondary-color);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .info-button:active {
            transform: translateY(0);
        }

        .tooltip {
            display: none;
            position: absolute;
            left: 0;
            top: calc(100% + 10px);
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            width: 300px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .tooltip::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 15px;
            width: 14px;
            height: 14px;
            background: white;
            border-left: 1px solid #ddd;
            border-top: 1px solid #ddd;
            transform: rotate(45deg);
            z-index: 1001;
        }

        .tooltip.show {
            display: block;
        }

        .slider-group {
            position: relative;
            z-index: 1;
        }

        .slider-group:hover {
            z-index: 100;
        }

        .slider-group:focus-within {
            z-index: 100;
        }

        /* Styles pour le contenu des tooltips */
        .tooltip-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .tooltip-impact {
            color: #007bff;
            font-weight: 500;
            margin: 8px 0;
        }

        .tooltip-description {
            margin: 8px 0;
            line-height: 1.4;
            color: #666;
        }

        .tooltip-source {
            font-size: 0.85em;
            color: #666;
            margin-top: 8px;
            font-style: italic;
        }

        .slider-controls {
            display: flex;
            align-items: center;
            gap: 6px;
            justify-content: flex-end;
            margin-left: auto;
        }

        .slider-container {
            position: relative;
            z-index: 1;
            width: 160px;
        }

        .slider-value-details {
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        .slider-value-container {
            display: flex;
            align-items: center;
            text-align: right;
            flex-grow: 1;
            flex-shrink: 0;
        }

        .slider-value {
            font-weight: 500;
            color: var(--category-color, var(--primary-color));
            transition: var(--transition-fast);
        }

        .slider-unit {
            color: #6B7280;
            font-size: 0.9em;
            white-space: nowrap;
            padding-left: 4px;
            flex-shrink: 1;
        }

        /* Remplacer le contenu des unités via JavaScript plutôt que HTML */
        .slider-group[data-unit="ans"] .slider-unit::before {
            content: " ans";
        }
        .slider-group[data-unit="jour"] .slider-unit::before {
            content: "/jour";
        }
        .slider-group[data-unit="sem"] .slider-unit::before {
            content: "/sem.";
        }
        .slider-group[data-unit="mois"] .slider-unit::before {
            content: "/mois";
        }
        .slider-group[data-unit="nuit"] .slider-unit::before {
            content: "/nuit";
        }
        .slider-group[data-unit="score"] .slider-unit::before {
            content: "/10";
        }

        input[type="range"] {
            width: 160px;
            height: 8px;
            background: #E2E8F0;
            border-radius: 4px;
            outline: none;
            margin: 0;
            -webkit-appearance: none;
            background: linear-gradient(to right, 
                var(--category-color, var(--primary-color)) var(--value-percent, 50%), 
                #E2E8F0 var(--value-percent, 50%)
            );
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
            transition: background 0.3s ease;
            will-change: background;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: white;
            border: 2px solid var(--category-color, var(--primary-color));
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
            will-change: transform;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        input[type="range"]::-webkit-slider-thumb:active {
            transform: scale(1.1);
            background: var(--category-color, var(--primary-color));
            border-color: white;
        }

        .info-btn {
            display: none;
        }

        .category[data-category="alimentation"] {
            --category-color: var(--category-1);
        }

        .category[data-category="mode-de-vie"] {
            --category-color: var(--category-2);
        }

        .category[data-category="social"] {
            --category-color: var(--category-3);
        }

        .category[data-category="academique"] {
            --category-color: var(--category-4);
        }

        .results {
            flex-shrink: 0;
            background: var(--card-background);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 20px;
            height: fit-content;
            border: 1px solid rgba(0, 0, 0, 0.05);
            width: 300px;
            margin-top: 0;
            z-index: 1;
        }

        .result-card {
            background: var(--input-background);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            transform-origin: center;
            will-change: transform;
        }

        .result-card:hover {
            transform: translateY(-5px) scale(var(--hover-scale));
            box-shadow: var(--shadow-lg);
        }

        .result-card h3 {
            color: var(--text-color);
            margin: 0 0 8px;
            font-size: 1em;
        }

        .result-card span {
            color: var(--primary-color);
            font-size: 1.6em;
            font-weight: 600;
            display: block;
            text-align: center;
            margin: 8px 0;
        }

        #grade-result span {
            color: var(--primary-color);
        }

        #salary-result span {
            color: var(--secondary-color);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .action-button {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            background: var(--input-background);
            color: var(--text-color);
            cursor: pointer;
            font-weight: 500;
            font-size: 0.9em;
            transition: var(--transition);
        }

        .action-button:hover {
            background: white;
            border-color: var(--primary-color);
        }

        .button-icon {
            font-size: 1.2em;
            margin-right: 8px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
        }

        .modal-content {
            background: var(--card-background);
            margin: 10% auto;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            border-radius: var(--border-radius);
            position: relative;
            box-shadow: var(--shadow-md);
        }

        .modal-title {
            font-size: 1.4em;
            color: var(--text-color);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .modal-description {
            color: var(--text-color);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .modal-source {
            display: inline-block;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            margin-top: 15px;
        }

        .modal-source:hover {
            text-decoration: underline;
        }

        .badge {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: var(--card-background);
            padding: 15px 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--text-color);
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .badge:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .badge img {
            width: 45px;
            height: 45px;
            margin-right: 15px;
            border-radius: 50%;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .badge:hover img {
            transform: rotate(360deg);
        }

        .badge span {
            font-weight: 600;
            font-size: 1.1em;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @media (max-width: 900px) {
            .main-content {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }

            .categories, .results-container, .results {
                width: 100%;
                max-width: 100%;
            }

            .results-container {
                position: static;
                margin-top: 15px;
                max-height: none;
                overflow-y: visible;
            }

            .slider-group {
                grid-template-columns: minmax(150px, 1fr) 140px minmax(70px, auto);
            }

            .slider-container {
                width: 140px;
            }

            input[type="range"] {
                width: 140px;
            }
        }

        @media (max-width: 768px) {
            .tooltip {
                width: min(280px, calc(100vw - 40px));
                font-size: 0.8em;
                left: 50%;
                transform: translateX(-50%) translateY(-5px);
            }

            .tooltip::before {
                left: 50%;
                transform: translateX(-50%) rotate(45deg);
            }

            .tooltip-description {
                font-size: 0.9em;
            }

            .slider-label:hover .tooltip {
                transform: translateX(-50%) translateY(0);
            }

            .header h1 {
                font-size: 1.5em;
            }

            .modal-content {
                margin: 5vh auto;
                padding: 20px;
            }
        }

        @media (max-width: 600px) {
            .slider-group {
                grid-template-columns: 1fr 100px minmax(65px, auto);
                gap: 6px;
            }

            .slider-container {
                width: 100px;
            }

            input[type="range"] {
                width: 100px;
            }

            .slider-label {
                font-size: 0.85em;
            }

            .slider-value-container,
            .slider-unit {
                font-size: 0.85em;
            }

            .category {
                padding: 8px;
            }

            .header h1 {
                font-size: 1.3em;
            }

            .ad-badge-logo {
                width: 50px;
                height: 50px;
            }
            .ad-badge-text {
                font-size: 0.7em;
            }
            .ad-badge-button {
                padding: 5px 10px;
                font-size: 0.7em;
            }
            .ad-badge-container {
                gap: 5px;
                bottom: 15px;
                right: 15px;
            }
        }

        @media (max-width: 480px) {
            body,
            .container {
                padding: 5px;
            }

            .header {
                padding: 10px;
                margin-bottom: 15px;
            }

            .header h1 {
                font-size: 1.2em;
            }

            .mode-btn {
                padding: 6px 12px;
                font-size: 0.9em;
            }

            .mode-description {
                font-size: 0.8em;
            }

            .disclaimer-card {
                padding: 10px;
                margin: 15px auto;
            }
            .disclaimer {
                font-size: 0.85em;
            }

            .slider-group {
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
                padding: 8px;
            }

            .slider-label {
                width: 100%;
                margin-bottom: 3px;
            }

            .slider-container {
                width: 100%;
            }

            input[type="range"] {
                width: 100%;
            }
            
            .slider-value-details {
                display: flex;
                align-items: center;
                gap: 5px;
                width: 100%;
                margin-top: 3px;
            }

            .slider-value-container {
                width: auto;
            }
            .slider-unit {
                width: auto;
                padding-left: 0;
            }
            
            .results {
                padding: 15px;
            }

            .result-card h3 {
                font-size: 0.95em;
            }
            .result-card span {
                font-size: 1.4em;
            }

            .action-button {
                padding: 8px 10px;
                font-size: 0.85em;
            }

            .modal-content {
                padding: 15px;
                margin: 5vh 5%;
                width: 90%;
            }

            .modal-title {
                font-size: 1.2em;
            }

            .ad-badge-logo {
                width: 40px;
                height: 40px;
            }
            .ad-badge-text {
                font-size: 0.65em;
            }
            .ad-badge-button {
                padding: 4px 8px;
                font-size: 0.65em;
            }
            .ad-badge-container {
                gap: 4px;
                bottom: 10px;
                right: 10px;
            }

            .category-title {
                font-size: 1em;
            }

            .slider-value-container {
                text-align: left;
            }
            .slider-value-details {
                justify-content: flex-start;
                width: 100%;
            }
        }

        .slider-group.important::before {
            content: "★";
            position: absolute;
            left: -25px;
            color: var(--category-color);
            font-size: 1.2em;
        }

        .slider-group.hidden {
            opacity: 0;
            transform: translateX(-20px);
            height: 0;
            margin: 0;
            padding: 0;
            pointer-events: none;
            transition: var(--transition);
        }

        .important-tooltip {
            display: none;
        }

        .tooltip-text {
            display: none;
        }

        .source-section {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .source-label {
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .modal-source {
            display: inline-flex;
            align-items: center;
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.9em;
            transition: var(--transition);
        }

        .modal-source:hover {
            text-decoration: underline;
        }

        .external-link {
            margin-left: 4px;
            font-size: 0.9em;
        }

        .modal-description {
            line-height: 1.6;
            margin: 15px 0;
            color: var(--text-color);
        }

        .modal-title {
            color: var(--primary-color);
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .tooltip-modal {
            display: none;
            position: absolute;
            background: var(--card-background);
            padding: 15px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            max-width: 350px;
            z-index: 1000;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .source-link {
            display: none;
        }

        .enhanced-tooltip {
            display: none;
        }

        .tooltip-links {
            margin-top: 15px;
            position: relative;
            z-index: 9999;
        }

        .tooltip-links a {
            display: block;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            position: relative;
            z-index: 9999;
            cursor: pointer;
        }

        .tooltip-links a:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .results {
            z-index: 1;
        }

        .result-card.benchmark {
            position: relative;
            z-index: 1;
        }

        /* Styles pour la carte benchmark */
        .result-card.benchmark {
            background: linear-gradient(135deg, #f0f9ff 0%, #e6f3ff 100%);
            position: relative;
            z-index: 1;
        }

        .benchmark-bar {
            position: relative;
            height: 8px;
            background: #E2E8F0;
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }

        .benchmark-progress {
            position: absolute;
            height: 100%;
            background: var(--primary-color);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* Supprimer les marqueurs de pourcentage */
        .benchmark-marker {
            display: none;
        }

        /* Uniformiser les couleurs des catégories */
        .category[data-category="psychologique"] {
            --category-color: var(--category-5);
        }

        .category[data-category="psychologique"] .slider-group input[type="range"] {
            background: linear-gradient(to right, 
                var(--category-5) var(--value-percent, 50%), 
                #E2E8F0 var(--value-percent, 50%)
            );
        }

        .category[data-category="psychologique"] .slider-group input[type="range"]::-webkit-slider-thumb {
            border-color: var(--category-5);
        }

        .category[data-category="psychologique"] .slider-group input[type="range"]::-webkit-slider-thumb:active {
            background: var(--category-5);
        }

        /* Styles des catégories */
        .category[data-category="alimentation"] {
            --category-color: var(--category-1);
        }

        .category[data-category="mode-de-vie"] {
            --category-color: var(--category-2);
        }

        .category[data-category="social"] {
            --category-color: var(--category-3);
        }

        .category[data-category="academique"] {
            --category-color: var(--category-4);
        }

        /* Styles uniformes pour tous les sliders */
        .slider-group input[type="range"] {
            width: 160px;
            height: 8px;
            background: linear-gradient(to right, 
                var(--category-color) var(--value-percent, 50%), 
                #E2E8F0 var(--value-percent, 50%)
            );
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .slider-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: white;
            border: 2px solid var(--category-color);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
            transition: transform 0.2s ease;
        }

        .slider-group input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider-group input[type="range"]::-webkit-slider-thumb:active {
            transform: scale(1.1);
            background: var(--category-color);
            border-color: white;
        }

        /* Supprimer les marqueurs de pourcentage du benchmark */
        .benchmark-marker {
            display: none;
        }

        .grade-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.2em;
            cursor: pointer;
            padding: 0 8px;
            transition: opacity 0.2s;
        }

        .grade-btn:hover {
            opacity: 0.7;
        }

        #grade-result {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        /* Styles pour la modale des calculs */
        .calcul-section {
            max-height: 80vh;
            overflow-y: auto;
            padding-right: 15px;
        }

        .coefficient-group {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .coefficient-group h4 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
        }

        .coefficient-group ul {
            list-style-type: none;
            padding-left: 0;
            margin: 0;
        }

        .coefficient-group li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }

        .coefficient-group li:last-child {
            border-bottom: none;
        }

        code {
            display: block;
            background: #f1f1f1;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
        }

        .modal h3 {
            color: var(--primary-color);
            margin: 20px 0 10px 0;
        }

        .modal p {
            margin: 10px 0;
            line-height: 1.6;
        }

        .documentation-section {
            margin-top: 20px;
        }

        .documentation-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .doc-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: var(--input-background);
            color: var(--text-color);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .doc-button:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .doc-button .button-icon {
            font-size: 1.2em;
        }

        .coefficient-justification {
            font-size: 0.9em;
            color: #666;
            margin: 5px 0 10px 20px;
            padding-left: 10px;
            border-left: 2px solid var(--primary-color);
        }

        .coefficient-group li strong {
            color: var(--primary-color);
        }

        .modal-content {
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .results-container {
            flex-shrink: 0;
            width: 300px;
            position: sticky;
            top: 20px;
            max-height: calc(100vh - 40px); /* 20px pour le décalage du haut + 20px de marge en bas */
            overflow-y: auto;
        }

        .results {
            background: var(--card-background);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(0, 0, 0, 0.05);
            width: 100%;
            margin-bottom: 20px;
        }

        .documentation-section {
            margin-top: 0;
        }

        .study-link {
            display: inline-flex;
            align-items: center;
            margin-left: 8px;
            padding: 3px 12px 3px 8px;
            background: #f3f6fa;
            border-radius: 999px;
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.92em;
            font-weight: 500;
            border: none;
            box-shadow: none;
            transition: background 0.18s, color 0.18s, box-shadow 0.18s;
            outline: none;
            gap: 4px;
        }
        .study-link .link-icon {
            margin-right: 3px;
            font-size: 1.08em;
        }
        .study-link:hover, .study-link:focus {
            background: #e8f0fe;
            color: #174ea6;
            box-shadow: 0 2px 8px rgba(37,99,235,0.07);
            text-decoration: none;
        }
        .study-link:active {
            background: #dbeafe;
            color: var(--primary-color);
        }

        .ad-badge-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column; /* Pour empiler le logo, le texte et le bouton */
            align-items: center; /* Pour centrer les éléments horizontalement */
            gap: 8px; /* Espace entre les éléments */
        }

        .ad-badge-logo-link {
            display: block;
            transition: transform 0.3s ease;
        }

        .ad-badge-logo-link:hover {
            transform: rotate(15deg) scale(1.1);
        }

        .ad-badge-logo {
            width: 60px; /* Taille du logo ajustée */
            height: 60px;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: box-shadow 0.3s ease;
        }

        .ad-badge-logo-link:hover .ad-badge-logo {
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

        .ad-badge-text {
            font-size: 0.8em;
            font-weight: bold;
            color: var(--text-color);
            text-align: center; /* Assure le centrage du texte même s'il est plus long */
        }

        .ad-badge-button {
            padding: 6px 12px;
            font-size: 0.8em;
            font-weight: 600;
            color: white;
            background-color: var(--primary-color);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            text-decoration: none; /* Au cas où on utilise un <a> stylé en bouton */
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .ad-badge-button:hover {
            background-color: #1D4ED8; /* Bleu plus foncé au survol */
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .calcul-modal-content {
            box-shadow: 0 8px 32px rgba(37,99,235,0.10), 0 1.5px 8px rgba(0,0,0,0.07);
            border-radius: 18px;
            background: linear-gradient(120deg, #fafdff 60%, #e8f0fe 100%);
            padding: 0;
            position: relative;
            overflow: visible;
        }
        .calcul-modal-header {
            display: flex;
            align-items: center;
            gap: 16px;
            background: linear-gradient(90deg, var(--primary-color) 60%, #60a5fa 100%);
            color: white;
            border-radius: 18px 18px 0 0;
            padding: 24px 32px 18px 32px;
            box-shadow: 0 2px 8px rgba(37,99,235,0.08);
        }
        .calcul-modal-icon {
            font-size: 2.2em;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.10));
        }
        .calcul-modal-header h2 {
            margin: 0;
            font-size: 1.5em;
            font-weight: 700;
            color: white;
            letter-spacing: 0.5px;
        }
        .styled-close {
            position: absolute;
            top: 18px;
            right: 24px;
            background: #fff;
            color: var(--primary-color);
            border: none;
            border-radius: 50%;
            width: 38px;
            height: 38px;
            font-size: 1.5em;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(37,99,235,0.10);
            cursor: pointer;
            z-index: 10;
            transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        }
        .styled-close:hover {
            background: var(--primary-color);
            color: #fff;
            box-shadow: 0 4px 16px rgba(37,99,235,0.18);
        }
        .calcul-section {
            padding: 32px 32px 24px 32px;
        }
        .calcul-section h3 {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.15em;
            color: var(--primary-color);
            margin: 32px 0 10px 0;
            font-weight: 700;
        }
        .calcul-section h3:first-child {
            margin-top: 0;
        }
        .calcul-section-icon {
            font-size: 1.2em;
        }
        .calcul-card {
            background: #fafdff;
            border-radius: 14px;
            box-shadow: 0 2px 8px rgba(37,99,235,0.07);
            margin: 18px 0 24px 0;
            padding: 18px 22px 10px 22px;
            border: 1.5px solid #e3e8f7;
        }
        .coefficient-group h4 {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.08em;
            color: var(--primary-color);
            margin: 0 0 10px 0;
            font-weight: 600;
        }
        .group-icon {
            font-size: 1.2em;
        }
        .impact-label {
            font-size: 0.95em;
            color: #2563ebcc;
            font-weight: 500;
            margin-left: 6px;
        }
        .calcul-separator {
            border: none;
            border-top: 2px dashed #c7d2fe;
            margin: 36px 0 28px 0;
        }
        @media (max-width: 700px) {
            .calcul-modal-content, .calcul-section {
                padding: 0 !important;
            }
            .calcul-modal-header {
                padding: 18px 12px 12px 12px;
            }
            .calcul-section {
                padding: 18px 10px 12px 10px;
            }
            .calcul-card {
                padding: 12px 8px 8px 8px;
            }
        }
        .instructions-modal-content {
            box-shadow: 0 12px 40px 0 rgba(37,99,235,0.18), 0 2px 12px rgba(0,0,0,0.10);
            border-radius: 22px;
            background: rgba(255,255,255,0.97);
            padding: 0;
            position: relative;
            overflow: visible;
            max-width: 520px;
            animation: modal-pop 0.35s cubic-bezier(.4,1.6,.6,1) both;
        }
        @keyframes modal-pop {
            0% { opacity: 0; transform: scale(0.85) translateY(40px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        .instructions-modal-header {
            display: flex;
            align-items: center;
            gap: 18px;
            background: linear-gradient(90deg, var(--primary-color) 60%, #60a5fa 100%);
            color: white;
            border-radius: 22px 22px 0 0;
            padding: 28px 36px 20px 36px;
            box-shadow: 0 2px 12px rgba(37,99,235,0.10);
        }
        .instructions-modal-icon {
            font-size: 2.8em;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.10));
            margin-right: 6px;
        }
        .instructions-modal-header h2 {
            margin: 0;
            font-size: 1.35em;
            font-weight: 700;
            color: white;
            letter-spacing: 0.5px;
        }
        .instructions-list {
            padding: 36px 36px 28px 36px;
            font-size: 1.13em;
            color: var(--text-color);
            margin: 0;
            list-style: none;
            counter-reset: instr;
        }
        .instructions-list li {
            margin-bottom: 22px;
            line-height: 1.7;
            background: linear-gradient(90deg, #f3f6fa 80%, #e8f0fe 100%);
            border-radius: 12px;
            padding: 16px 18px 16px 54px;
            position: relative;
            font-size: 1.08em;
            box-shadow: 0 2px 8px rgba(37,99,235,0.04);
            transition: background 0.2s;
        }
        .instructions-list li:last-child { margin-bottom: 0; }
        .instructions-step {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: #fff;
            font-weight: bold;
            font-size: 1.1em;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(37,99,235,0.10);
            border: 2px solid #fff;
        }
        .styled-close {
            position: absolute;
            top: 18px;
            right: 24px;
            background: #fff;
            color: var(--primary-color);
            border: none;
            border-radius: 50%;
            width: 38px;
            height: 38px;
            font-size: 1.5em;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(37,99,235,0.10);
            cursor: pointer;
            z-index: 10;
            transition: background 0.2s, color 0.2s, box-shadow 0.2s;
            outline: none;
        }
        .styled-close:hover {
            background: var(--primary-color);
            color: #fff;
            box-shadow: 0 4px 16px rgba(37,99,235,0.18);
        }
        @media (max-width: 600px) {
            .instructions-modal-content, .instructions-list {
                padding: 10px !important;
            }
            .instructions-modal-header {
                padding: 14px 10px 10px 10px;
            }
            .instructions-list {
                font-size: 1em;
            }
            .instructions-list li {
                padding: 12px 10px 12px 44px;
                font-size: 1em;
            }
            .instructions-step {
                width: 26px;
                height: 26px;
                font-size: 1em;
                left: 8px;
            }
            .styled-close {
                top: 8px;
                right: 10px;
                width: 32px;
                height: 32px;
                font-size: 1.1em;
            }
        }

        .category[data-category="alimentation"] .info-button:hover {
            background: var(--category-1);
        }

        .category[data-category="mode-de-vie"] .info-button:hover {
            background: var(--category-2);
        }

        .category[data-category="social"] .info-button:hover {
            background: var(--category-3);
        }

        .category[data-category="academique"] .info-button:hover {
            background: var(--category-4);
        }

        .category[data-category="psychologique"] .info-button:hover {
            background: var(--category-5);
        }

        .category[data-category="environnemental"] .info-button:hover {
            background: var(--category-6);
        }

        .info-button:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }
    </style>
</head>
<body>
    <div class="language-switcher" role="group" aria-label="Sélection de la langue">
        <button class="language-btn" onclick="changeLanguage('fr')" aria-pressed="true">FR</button>
        <button class="language-btn" onclick="changeLanguage('en')" aria-pressed="false">EN</button>
    </div>

    <div class="container">
        <div class="header" role="banner">
            <h1 id="title">Simulateur de Réussite Scolaire</h1>
            <div class="mode-switch" role="group" aria-label="Sélection du mode">
                <div class="mode-buttons">
                    <button class="mode-btn active" onclick="switchMode('basic')" id="basic-btn" aria-pressed="true">Mode basique</button>
                    <button class="mode-btn" onclick="switchMode('advanced')" id="advanced-btn" aria-pressed="false">Mode avancé</button>
                    <button class="mode-btn" onclick="showInstructions()" id="instructions-btn" aria-pressed="false">Instructions</button>
                </div>
                <p class="mode-description" id="mode-description" aria-live="polite">
                    Mode basique : Focus sur les 6 facteurs les plus impactants pour la réussite scolaire.
                </p>
            </div>
        </div>

        <div class="main-content">
            <div class="categories" role="main">
                <!-- Les catégories seront générées dynamiquement par le JavaScript -->
            </div>

            <div class="results-container">
                <div class="results">
                    <h2>Impact sur vos résultats</h2>
                    <div class="result-card">
                        <h3>Note moyenne actuelle</h3>
                        <div id="grade-result">
                            <span>12.2/20</span>
                        </div>
                    </div>
                    <div class="result-card benchmark">
                        <div id="benchmark-result">
                            <div class="benchmark-title">
                                <h3>Position nationale</h3>
                            </div>
                            <p class="benchmark-text">Tu fais mieux que 50% des élèves</p>
                            <div class="benchmark-bar">
                                <div class="benchmark-progress" style="width: 50%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="result-card">
                        <div id="salary-result">
                            <h3>Salaire mensuel estimé</h3>
                            <span>2 180 €/mois</span>
                        </div>
                    </div>
                </div>

                <div class="results documentation-section">
                    <h2>Documentation</h2>
                    <div class="result-card">
                        <div class="documentation-buttons">
                            <button class="doc-button" onclick="window.open('sources_scientifiques.html', '_blank')">
                                <span class="button-icon">📚</span>
                                Sources scientifiques
                            </button>
                            <button class="doc-button" onclick="showCalculDetails()">
                                <span class="button-icon">🔍</span>
                                Détails des calculs
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="disclaimer-card">
        <p class="disclaimer">Ce simulateur a une vocation pédagogique et illustrative. Il vise à sensibiliser aux facteurs influençant la réussite scolaire et ne constitue pas un outil de prédiction. Les résultats sont des estimations basées sur des moyennes statistiques et ne prédisent pas les situations individuelles.</p>
        <p class="disclaimer" style="margin-top: 10px;">Aucune donnée n'est collectée ni sauvegardée : toutes les informations restent dans votre navigateur et sont effacées à la fermeture de la page.</p>
    </div>

    <div class="ad-badge-container" id="ad-badge">
        <a href="https://www.youtube.com/@AlbertDuplantin" target="_blank" class="ad-badge-logo-link" aria-label="Chaîne YouTube d'Albert Duplantin">
            <img src="albertduplantin.png" alt="Logo Albert Duplantin" class="ad-badge-logo">
        </a>
        <p class="ad-badge-text">par Albert Duplantin</p>
        <button class="ad-badge-button" onclick="location.href='contact.html'">Contact</button>
    </div>

    <!-- Modales -->
    <div id="info-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('info-modal')">&times;</span>
            <div id="info-content"></div>
        </div>
    </div>

    <div id="sources-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('sources-modal')">&times;</span>
            <h2>Sources scientifiques</h2>
            <div id="sources-content"></div>
        </div>
    </div>

    <div id="menus-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('menus-modal')">&times;</span>
            <h2>Exemples de menus équilibrés</h2>
            <div id="menus-content"></div>
        </div>
    </div>

    <!-- Modale pour les détails des calculs -->
    <div id="calcul-modal" class="modal">
        <div class="modal-content calcul-modal-content">
            <button class="close-btn styled-close" onclick="closeModal('calcul-modal')" aria-label="Fermer la fenêtre">✕</button>
            <div class="calcul-modal-header">
                <span class="calcul-modal-icon">🔍</span>
                <h2>Détails des calculs et pondérations</h2>
            </div>
            <div class="calcul-section">
                <h3><span class="calcul-section-icon">📊</span> Calcul de la note moyenne</h3>
                <p>La note finale est calculée en appliquant les coefficients suivants, basés sur des études scientifiques :</p>
                
                <div class="coefficient-group calcul-card">
                    <h4>Mode de vie <span class="group-icon">🏃</span> <span class="impact-label">(impact fort)</span></h4>
                    <ul>
                        <li>
                            <strong>Sommeil : +20%</strong>
                            <p class="coefficient-justification">
                                Méta-analyse de Dewald et al. (2010) montrant une amélioration de 19-23% des performances académiques avec un sommeil optimal de 7h.
                                <a href="https://doi.org/10.1016/j.smrv.2009.10.004" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Lire l'étude
                                </a>
                            </p>
                        </li>
                        <li>
                            <strong>Activité sportive : +15%</strong>
                            <p class="coefficient-justification">
                                Étude longitudinale de Singh et al. (2019) démontrant une amélioration de 12-17% des performances cognitives avec 3 séances hebdomadaires.
                                <a href="https://doi.org/10.1123/jpah.2018-0473" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Lire l'étude
                                </a>
                            </p>
                        </li>
                        <li>
                            <strong>Petit-déjeuner : +15%</strong>
                            <p class="coefficient-justification">
                                Méta-analyse de Adolphus et al. (2013) révélant un impact de 13-16% sur les performances matinales.
                                <a href="https://doi.org/10.3389/fnhum.2013.00425" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Lire l'étude
                                </a>
                            </p>
                        </li>
                        <li>
                            <strong>Cannabis : -30%</strong>
                            <p class="coefficient-justification">
                                Étude de cohorte de Meier et al. (2012) montrant une baisse de 25-35% des performances cognitives chez les consommateurs réguliers.
                                <a href="https://doi.org/10.1073/pnas.1206820109" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Lire l'étude
                                </a>
                            </p>
                        </li>
                        <li>
                            <strong>Temps d'écran : -15%</strong>
                            <p class="coefficient-justification">
                                Méta-analyse de Kostyrka-Allchorne et al. (2017) indiquant une baisse de 12-18% des performances pour chaque heure excessive.
                                <a href="https://doi.org/10.1016/j.dr.2017.07.001" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Lire l'étude
                                </a>
                            </p>
                        </li>
                    </ul>
                </div>

                <div class="coefficient-group calcul-card">
                    <h4>Alimentation <span class="group-icon">🥝</span> <span class="impact-label">(impact modéré)</span></h4>
                    <ul>
                        <li>
                            <strong>Fruits/légumes et produits laitiers : +10%</strong>
                            <p class="coefficient-justification">
                                Revue systématique de Kim et al. (2016) montrant un impact de 8-12% sur les fonctions cognitives.
                                <a href="https://doi.org/10.3945/ajcn.115.122119" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Lire l'étude
                                </a>
                            </p>
                        </li>
                        <li>
                            <strong>Sucres et graisses : -10%</strong>
                            <p class="coefficient-justification">
                                Méta-analyse de Francis et al. (2013) révélant un impact négatif de 8-13% sur la mémoire et l'apprentissage.
                                <a href="https://doi.org/10.3945/jn.113.182519" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Lire l'étude
                                </a>
                            </p>
                        </li>
                    </ul>
                </div>

                <div class="coefficient-group calcul-card">
                    <h4>Facteurs personnels <span class="group-icon">🧠</span> <span class="impact-label">(impact total revisité ~35-40%)</span></h4>
                    <ul>
                        <li>
                            <strong>Auto-efficacité scolaire : Pondération +0.25 (Impact très fort)</strong>
                            <p class="coefficient-justification">
                                La croyance en sa capacité à réussir. Fortement liée à la persévérance et aux stratégies d'apprentissage efficaces.
                                <a href="https://www.mdpi.com/2227-7102/12/5/287" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Nunes et al. (2022), r ≈ 0.35
                                </a>
                                <a href="https://psycnet.apa.org/record/1997-08589-000" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Bandura (1997)
                                </a>
                            </p>
                        </li>
                        <li>
                            <strong>Motivation pour les études : Pondération +0.20 (Impact fort)</strong>
                            <p class="coefficient-justification">
                                L'intérêt et le plaisir d'apprendre. Essentielle pour l'engagement et la persévérance.
                                <a href="https://www.mdpi.com/2227-7102/12/5/287" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Nunes et al. (2022), r ≈ 0.22
                                </a>
                                <a href="https://selfdeterminationtheory.org/" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Ryan & Deci, SDT
                                </a>
                            </p>
                        </li>
                        <li>
                            <strong>Stratégies d'apprentissage & Métacognition : Pondération +0.20 (Impact fort)</strong>
                            <p class="coefficient-justification">
                                Savoir comment apprendre (planification, organisation, auto-évaluation). Crucial pour l'efficacité.
                                <a href="https://visible-learning.org/fr/john-hattie-classement-facteurs-reussite-apprentissage/" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Hattie (Visible Learning)
                                </a>
                                <a href="https://psycnet.apa.org/record/2012-31271-001" target="_blank" class="study-link">
                                     <span class="link-icon">🔗</span> Dunlosky et al. (2013)
                                </a>
                            </p>
                        </li>
                        <li>
                            <strong>Gestion du Stress & Bien-être Émotionnel : Pondération +0.15 (Impact significatif)</strong>
                            <p class="coefficient-justification">
                                Maintenir un équilibre émotionnel et gérer le stress pour optimiser concentration et performance.
                                <a href="https://www.mdpi.com/2227-7102/11/9/513" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Quílez-Robres et al. (2021), r ≈ 0.17 (facteurs émotionnels)
                                </a>
                            </p>
                        </li>
                    </ul>
                </div>

                <div class="coefficient-group calcul-card">
                    <h4>Environnement social <span class="group-icon">👪</span> <span class="impact-label">(impact important)</span></h4>
                    <ul>
                        <li>
                            <strong>Climat de classe et soutien familial : +20%</strong>
                            <p class="coefficient-justification">
                                Méta-analyses de Hattie (2009) indiquant un impact de 17-23% sur la réussite scolaire.
                                <a href="https://doi.org/10.4324/9780203887332" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Lire l'étude
                                </a>
                            </p>
                        </li>
                    </ul>
                </div>

                <div class="coefficient-group calcul-card">
                    <h4>Engagement académique <span class="group-icon">🎓</span> <span class="impact-label">(impact modéré)</span></h4>
                    <ul>
                        <li>
                            <strong>Participation : +15%</strong>
                            <p class="coefficient-justification">
                                Méta-analyse de Freeman et al. (2014) montrant un gain de 12-18% en apprentissage actif.
                                <a href="https://doi.org/10.1073/pnas.1319030111" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Lire l'étude
                                </a>
                            </p>
                        </li>
                        <li>
                            <strong>Environnement et ressources : +10%</strong>
                            <p class="coefficient-justification">
                                Études de Barrett et al. (2015) démontrant un impact de 8-12% des conditions d'apprentissage.
                                <a href="https://doi.org/10.1016/j.buildenv.2015.02.013" target="_blank" class="study-link">
                                    <span class="link-icon">🔗</span> Lire l'étude
                                </a>
                            </p>
                        </li>
                    </ul>
                </div>

                <hr class="calcul-separator" />

                <h3><span class="calcul-section-icon">🧮</span> Formule de calcul</h3>
                <p>La note est calculée ainsi :</p>
                <code>Note Finale = 10 + Σ ((ValeurFacteur - ValeurDéfautFacteur) × CoefficientFacteur)</code>
                <p>La note est ensuite bornée entre 0 et 20.</p>

                <h3><span class="calcul-section-icon">🇫🇷</span> Calcul du positionnement national</h3>
                <p>Le positionnement est désormais calculé selon la <strong>fonction de répartition d'une loi normale</strong> centrée sur la moyenne nationale&nbsp;:</p>
                <code>Position = 100 × CDF<sub>loi normale</sub>(Note, moyenne = 12,2, écart-type = 3,0)</code>
                <p>
                    Cela signifie que si ta note est très supérieure à la moyenne, tu te situes dans le top national (proche de 100&nbsp;%), et si elle est très inférieure, dans le bas du classement. Cette méthode reflète la réalité statistique de la distribution des notes du bac en France.<br>
                    <em>Source écart-type&nbsp;: discussions entre enseignants et statisticiens&nbsp;: <a href="https://les-mathematiques.net/vanilla/discussion/2333969/harmonisation-des-notes-du-baccalaureat" target="_blank" class="study-link"><span class="link-icon">🔗</span> Voir le débat</a></em>
                </p>

                <h3><span class="calcul-section-icon">💶</span> Calcul du salaire estimé</h3>
                <p>Le salaire mensuel est calculé selon la formule :</p>
                <code>Salaire = 1500€ + (Note - 10) × 155€ + Niveau d'études × 300€</code>
                <p>Basé sur les données INSEE 2023 sur les salaires moyens par niveau d'études et performances académiques
                    <a href="https://www.insee.fr/fr/statistiques/6524161" target="_blank" class="study-link">
                        <span class="link-icon">🔗</span> Source : INSEE 2023
                    </a>
                </p>
            </div>
        </div>
    </div>

    <!-- Ajout de la modale Instructions juste après les autres modales -->
    <div id="instructions-modal" class="modal">
        <div class="modal-content instructions-modal-content">
            <button class="close-btn styled-close" onclick="closeModal('instructions-modal')" aria-label="Fermer la fenêtre">✕</button>
            <div class="instructions-modal-header">
                <span class="instructions-modal-icon" style="font-size:2.8em;">💡</span>
                <h2>Instructions d'utilisation</h2>
            </div>
            <ol class="instructions-list">
                <li><span class="instructions-step">1</span> Ajuste les curseurs en fonction de ta situation actuelle.</li>
                <li><span class="instructions-step">2</span> Ajuste ta note moyenne actuelle avec les boutons <b>+</b> et <b>-</b> situés à côté de la note moyenne estimée.</li>
                <li><span class="instructions-step">3</span> Agis sur les curseurs pour voir l'impact de ce que tu peux améliorer.</li>
            </ol>
        </div>
    </div>

    <script src="simulateur.js"></script>
</body>
</html> 